<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>andayleee - Аккаунт</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YQ85K7N4J6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YQ85K7N4J6');
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="stylesheet" type="text/css" th:href="@{/css/homeStyle.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div th:replace="~{blocks/header :: header}"></div>
<div class="row mx-0">
  <div class="d-none d-md-block col-md-2 px-0"></div>
  <div th:action="${'/'}" class="col-12 col-md-8 px-0">
    
    <div th:each="el : ${user}" class="container px-3">
    <div class="row">
        <div class="col-9">
            <!-- Отображение данных -->
            <div class="profile-view" id="profileView">
                <h1 th:text="${el.getName()}">Имя</h1>
                <h2 th:text="${el.getEmail()}">Логин</h2>
                <p th:text="${el.getDescription()}">Описание</p>
            </div>

            <!-- Форма редактирования (скрыта по умолчанию) -->
            <form th:action="@{/profile/update}" method="post" enctype="multipart/form-data" class="profile-edit d-none" id="profileEdit">
                <div class="mb-2">
                    <label for="nameInput" class="form-label">Имя</label>
                    <input type="text" class="form-control" id="nameInput" name="name" th:value="${el.getName()}">
                </div>
                <div class="mb-2">
                    <label for="emailInput" class="form-label">Логин (Email)</label>
                    <input type="email" class="form-control" id="emailInput" name="email" th:value="${el.getEmail()}">
                </div>
                <div class="mb-2">
                    <label for="descInput" class="form-label">Описание</label>
                    <textarea class="form-control" id="descInput" name="description" rows="3" th:text="${el.getDescription()}"></textarea>
                </div>
                <div class="mb-2">
                    <label for="photoInput" class="form-label">Аватарка</label>
                    <input type="file" class="form-control" id="photoInput" name="photo">
                </div>
                <button type="submit" class="btn btn-success me-2">Сохранить</button>
                <button type="button" class="btn btn-secondary" id="cancelEditBtn">Отмена</button>
            </form>
        </div>
        <!-- Аватарка с кнопкой -->
        <div class="col-3 d-flex flex-column justify-content-center align-items-center">
            <div class="ratio ratio-1x1 w-100 mb-2">
                <img th:src="@{${user.photoPath}}"
                     alt="Фото профиля"
                     class="img-fluid rounded-circle object-fit-cover avatar-hover"
                     id="userPhoto"
                     style="cursor: pointer;"
                     data-bs-toggle="modal"
                     data-bs-target="#photoModal">
            </div>
            <!-- Модальное окно -->
            <div class="modal fade overflow-hidden" id="photoModal" tabindex="-1" aria-labelledby="photoModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-xl mt-0 mb-0">
                <div class="modal-content bg-transparent border-0">
                  <div class="modal-header border-0 d-flex justify-content-end">
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body d-flex justify-content-center">
                    <img th:src="@{${user.photoPath}}" class="img-fluid" style="max-height:90vh;">
                  </div>
                </div>
              </div>
            </div>
            <!-- Кнопка регистрации -->
            <div>
                <button class="btn btn-neutral bg-dark text-light avatar-hover" id="editProfileBtn">Редактировать профиль</button>
            </div>
        </div>
    </div>
</div>

<div class="accordion" id="faqAccordion">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
        Вопрос 1
      </button>
    </h2>
    <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
      <div class="accordion-body">
        Ответ на вопрос 1. Здесь может быть любой текст или даже HTML.
      </div>
    </div>
  </div>

  <div class="accordion-item">
    <h2 class="accordion-header" id="headingTwo">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
        Вопрос 2
      </button>
    </h2>
    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
      <div class="accordion-body">
        <table class="table mt-3">
          <thead>
            <tr>
              <th scope="col">Id</th>
              <th scope="col">E-mail</th>
              <th scope="col">Name</th>
            </tr>
          </thead>
          <tbody>
          <form>
            <tr th:each="el : ${user}">
              <td scope="row"><h3 th:text="${el.getId()}"></h3></td>
              <td><h3 th:text="${el.getEmail()}"></h3></td>
              <td><h3 th:text="${el.getName()}"></h3></td>
            </tr>
          </form>
        </tbody>
      </table>
      </div>
    </div>
  </div>
</div>
  </div>
  <div class="d-none d-md-block col-md-2 px-0"></div>
</div>
<script th:src="@{/js/profileScript.js}"></script>
</body>
</html>